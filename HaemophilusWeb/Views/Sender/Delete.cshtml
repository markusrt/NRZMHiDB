@using HaemophilusWeb.Models
@model HaemophilusWeb.Models.Sender

@{
    ViewBag.Title = "Löschen bestätigen";
}

@if (ViewBag.Sendings.Count == 0)
{
@section DeleteModel
    {
    
    <h3>Sind Sie sicher, dass sie den folgenden Einsender löschen wollen?</h3>
    <dl class="dl-horizontal">
        <dt>
            @Html.DisplayNameFor(model => model.Name)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Name)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Department)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Department)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.City)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.PostalCode) @Html.DisplayFor(model => model.City)
        </dd>
    </dl>
}
}
else
{
    <div class="alert alert-danger" role="alert">
      <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
      <span class="sr-only">Fehler:</span>
        Der Einsender "@Model.Name" kann nicht gelöscht werden, so lange ihm noch Einsendungen zugeordnet sind.
    </div>
    <p>
        Bitte ordnen Sie die unten aufgeführten Einsendungen einem anderen Einsender zu und wiederholen sie
        anschließend den Löschvorgang.
    </p>
    foreach (Sending sending in ViewBag.Sendings)
    {
    <p>
        @Html.ActionLink("Einsendung " + sending.Isolate.LaboratoryNumber, "Edit", "PatientSending", new { id = sending.SendingId }, null)
    </p>
    }
    <div class="alert alert-info" role="alert">
      <span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>
      <span class="sr-only">Info:</span>
        Am einfachsten lässt sich die Neuzuordnung durchführen in dem Sie jeden der obigen Links in einem neuen Fenster
        öffenen, einen anderen Einsender auswählen und den Datensatz speichern. Anschließend können Sie dieses Fenster
        neu laden (F5) um den Löschvorgang fortzusetzten.
    </div>
}
